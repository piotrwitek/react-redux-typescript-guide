<div align="center">

# ç”¨ TypeScript å†™ React & Redux - å®Œå…¨æŒ‡å—

_"è¿™ä¸ªæŒ‡å—æ˜¯ä¸€ä¸ª**æœ€æ–°çš„æ‘˜è¦**ï¼Œè®°å½•äº†å…³äºå¦‚ä½•ç”¨ **TypeScript** ä»¥**å‡½æ•°å¼é£æ ¼**ä½¿ç”¨ **React**ï¼ˆä»¥åŠç›¸å…³ç”Ÿæ€ï¼‰æœ€é‡è¦çš„æ¨¡å¼å’Œç¤ºä¾‹ã€‚å®ƒä¼šä½¿ä½ çš„ä»£ç åœ¨**ä»å…·ä½“å®ç°ä¸­è¿›è¡Œç±»å‹æ¨å¯¼**æ—¶ç»å¯¹æ˜¯**ç±»å‹å®‰å…¨**çš„ï¼Œè¿™æ ·å°±èƒ½å‡å°‘æ¥è‡ªè¿‡åº¦ç±»å‹å£°æ˜çš„ä¿¡æ¯å™ªéŸ³ï¼Œå¹¶æ›´å®¹æ˜“å†™å‡ºæ˜“äºé•¿æœŸç»´æŠ¤çš„æ­£ç¡®ç±»å‹å£°æ˜ã€‚"_

[![Join the community on Spectrum](https://withspectrum.github.io/badge/badge.svg)](https://spectrum.chat/react-redux-ts)
[![Join the chat at https://gitter.im/react-redux-typescript-guide/Lobby](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/react-redux-typescript-guide/Lobby)

_è§‰å¾—æœ‰å¸®åŠ©ï¼Ÿæƒ³è¦æ›´å¤šæ›´æ–°ï¼Ÿ_

[**ç‚¹ä¸ª :star: æ”¯æŒä¸€ä¸‹å§**](https://github.com/piotrwitek/react-redux-typescript-guide/stargazers)

<a href="https://www.buymeacoffee.com/piotrekwitek">
  <img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me a Coffee">
</a>
<a href="https://www.patreon.com/piotrekwitek">
  <img src="https://c5.patreon.com/external/logo/become_a_patron_button@2x.png" alt="Become a Patron" width="160">
</a>

<br/><hr/>

### **æ›´æ–°äº†ä»€ä¹ˆï¼Ÿ**

:tada: _ç°åœ¨æ›´æ–°æ”¯æŒåˆ° **TypeScript v3.7**_ :tada:
:rocket: _å‡çº§åˆ° `typesafe-actions@5.x.x` :rocket:

<hr/><br/>

</div>

### **ç›®æ ‡**

- å®Œå…¨çš„ç±»å‹å®‰å…¨ï¼ˆæ”¯æŒ [`--strict`](https://www.typescriptlang.org/docs/handbook/compiler-options.html) æ¨¡å¼ï¼‰ï¼Œå¹¶ä¸”åœ¨å‘åº”ç”¨çš„ä¸‹æ¸¸ä»£ç ä¼ é€’æ—¶ï¼Œä¸ä¼šä¸¢å¤±ç±»å‹ä¿¡æ¯ï¼ˆæ¯”å¦‚ï¼šç¼ºå°‘ç±»å‹æ–­è¨€æˆ–ç”¨ `any` æ¥å¼ºè¡Œä½¿ç”¨ï¼‰
- ä½¿ç”¨é«˜çº§ TypeScript è¯­è¨€ç‰¹æ€§ï¼ˆè¯¸å¦‚**ç±»å‹æ¨è®º**å’Œ**æ§åˆ¶æµåˆ†æ**ï¼‰æ¥æ¶ˆé™¤ç±»å‹å†—ä½™ã€ä½¿ç±»å‹å£°æ˜ç®€æ˜æ‰¼è¦
- ä½¿ç”¨ä¸“é—¨çš„ TypeScript [è¡¥å……åº“](#complementary-libraries) æ¥å‡å°‘ç±»å‹ä»£ç çš„é‡å¤æ€§å’Œå¤æ‚åº¦

### **Reactã€Reduxã€Typescript ç”Ÿæ€ç³»ç»Ÿ**

- [typesafe-actions](https://github.com/piotrwitek/typesafe-actions) - ä¸º Redux / Flux æ¶æ„ä¸­ "action-creators" åˆ›é€ çš„ç±»å‹å®‰å…¨å®ç”¨å·¥å…·é›†  
- [utility-types](https://github.com/piotrwitek/utility-types) - TypeScript å¸¸ç”¨æ³›å‹é›†åˆï¼Œèƒ½å¤Ÿè¡¥å…… TS è‡ªå¸¦çš„æ˜ å°„ç±»å‹å’Œåˆ«å - æŠŠå®ƒå½“æˆç±»å‹å¤ç”¨çš„ lodashã€‚  
- [react-redux-typescript-scripts](https://github.com/piotrwitek/react-redux-typescript-scripts) - å¼€å‘è€…å·¥å…·é…ç½®æ–‡ä»¶ï¼Œå¯ç”¨äºéµå¾ªæœ¬æŒ‡å—çš„é¡¹ç›®

### **ç¤ºä¾‹**

- Todo-App playground: [Codesandbox](https://codesandbox.io/s/github/piotrwitek/typesafe-actions/tree/master/codesandbox)
- React, Redux, TypeScript - RealWorld App: [Github](https://github.com/piotrwitek/react-redux-typescript-realworld-app) | [Demo](https://react-redux-typescript-realworld-app.netlify.com/)

### **Playground é¡¹ç›®**

[![Build Status](https://semaphoreci.com/api/v1/piotrekwitek/react-redux-typescript-guide/branches/master/shields_badge.svg)](https://semaphoreci.com/piotrekwitek/react-redux-typescript-guide)

æŸ¥çœ‹ä½äº `/playground` æ–‡ä»¶å¤¹ä¸­çš„ Playground é¡¹ç›®ã€‚å®ƒåŒ…å«æœ¬æŒ‡å—æ‰€æœ‰çš„ä»£ç ç¤ºä¾‹çš„æºæ–‡ä»¶ã€‚å®ƒä»¬éƒ½å·²ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ TypeScript å’Œç¬¬ä¸‰æ–¹ç±»å‹å®šä¹‰åŒ…ï¼ˆè¯¸å¦‚ `@types/react` å’Œ `@types/react-redux`ï¼‰è¿›è¡Œäº†æµ‹è¯•ï¼Œä»¥ç¡®ä¿ç¤ºä¾‹æ˜¯æœ€æ–°çš„ï¼Œä¸”æ²¡æœ‰éšç€ç±»å‹å®šä¹‰å‡çº§è€Œå¤±æ•ˆï¼ˆåŸºäº `create-react-app --typescript`ï¼‰ã€‚
> æˆ‘ä»¬åˆ›å»ºäº†è¯¥ Playground é¡¹ç›®ä»¥ä¾¿ä½ å¯ä»¥ç®€å•åœ°å…‹éš†åˆ°æœ¬åœ°ï¼Œå¹¶ç«‹å³å°è¯•æœ¬æŒ‡å—ä¸­æ‰€æœ‰çš„ç»„ä»¶æ¨¡å¼ã€‚å®ƒå¯ä»¥ä½¿ä½ æ— éœ€è‡ªå·±åˆ›å»ºå¤æ‚çš„ç¯å¢ƒé…ç½®ï¼Œç›´æ¥åœ¨çœŸå®çš„é¡¹ç›®ç¯å¢ƒä¸­å­¦ä¹ æœ¬æŒ‡å—çš„æ‰€æœ‰ç¤ºä¾‹ã€‚

## è´¡çŒ®æŒ‡å—

ä½ èƒ½è´¡çŒ®å¹¶å¸®åŠ©æ”¹è¿›æœ¬é¡¹ç›®ï¼Œå¦‚æœä½ è®¡åˆ’åšå‡ºè´¡çŒ®ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„è´¡çŒ®æŒ‡å—ï¼š[CONTRIBUTING.md](/CONTRIBUTING.md)

## èµåŠ©

ä½ ä¹Ÿèƒ½é€šè¿‡èµåŠ© issues æä¾›å¸®åŠ©ã€‚
é€šè¿‡ IssueHunt å¹³å°è¿›è¡ŒèµåŠ©ï¼Œbug ä¿®å¤æˆ–åŠŸèƒ½è¯·æ±‚ä¹‹ç±»çš„ issues å¯ä»¥æ›´å¿«å¾—åˆ°è§£å†³ã€‚

æˆ‘å¼ºçƒˆå»ºè®®ä½ èµåŠ©è‡ªå·±æœŸå¾…è§£å†³çš„ issueï¼Œä»¥ä¾¿å¢åŠ å®ƒçš„ä¼˜å…ˆçº§å¹¶å¸å¼•è´¡çŒ®è€…è§£å†³ã€‚

[![Let's fund issues in this repository](https://issuehunt.io/static/embed/issuehunt-button-v1.svg)](https://issuehunt.io/repos/76996763)

---

ğŸŒŸ - _æ–°å†…å®¹åŠæ›´æ–°æ¿å—_

## ç›®å½•

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->


- [React - ç±»å‹å®šä¹‰é€ŸæŸ¥è¡¨](#react---%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E9%80%9F%E6%9F%A5%E8%A1%A8)
    - [`React.FC<Props>` | `React.FunctionComponent<Props>`](#reactfcprops--reactfunctioncomponentprops)
    - [`React.Component<Props, State>`](#reactcomponentprops-state)
    - [`React.ComponentType<Props>`](#reactcomponenttypeprops)
    - [`React.ComponentProps<typeof XXX>`](#reactcomponentpropstypeof-xxx)
    - [`React.ReactElement` | `JSX.Element`](#reactreactelement--jsxelement)
    - [`React.ReactNode`](#reactreactnode)
    - [`React.CSSProperties`](#reactcssproperties)
    - [`React.HTMLProps<HTMLXXXElement>`](#reacthtmlpropshtmlxxxelement)
    - [`React.ReactEventHandler<HTMLXXXElement>`](#reactreacteventhandlerhtmlxxxelement)
    - [`React.XXXEvent<HTMLXXXElement>`](#reactxxxeventhtmlxxxelement)
- [React - ç±»å‹æ¨¡å¼](#react---%E7%B1%BB%E5%9E%8B%E6%A8%A1%E5%BC%8F)
  - [Function Components - FC](#function-components---fc)
    - [- è®¡æ•°å™¨ç»„ä»¶](#--%E8%AE%A1%E6%95%B0%E5%99%A8%E7%BB%84%E4%BB%B6)
    - [- ç»„ä»¶çš„ å±æ€§å±•å¼€](#--%E7%BB%84%E4%BB%B6%E7%9A%84-%E5%B1%9E%E6%80%A7%E5%B1%95%E5%BC%80)
  - [Class Components](#class-components)
    - [- è®¡æ•°å™¨ç»„ä»¶ Class ç‰ˆ](#--%E8%AE%A1%E6%95%B0%E5%99%A8%E7%BB%84%E4%BB%B6-class-%E7%89%88)
    - [- Class ç»„ä»¶å’Œ default props](#--class-%E7%BB%84%E4%BB%B6%E5%92%8C-default-props)
  - [æ³›å‹ç»„ä»¶](#%E6%B3%9B%E5%9E%8B%E7%BB%84%E4%BB%B6)
    - [- æ³›å‹åˆ—è¡¨ç»„ä»¶](#--%E6%B3%9B%E5%9E%8B%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6)
  - [Render Props](#render-props)
    - [- Name Provider ç»„ä»¶](#--name-provider-%E7%BB%84%E4%BB%B6)
    - [- Mouse Provider ç»„ä»¶](#--mouse-provider-%E7%BB%84%E4%BB%B6)
  - [é«˜é˜¶ç»„ä»¶](#%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6)
    - [- ç”¨ HOC å°è£…ä¸€ä¸ªç»„ä»¶](#--%E7%94%A8-hoc-%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AA%E7%BB%84%E4%BB%B6)
    - [- ç”¨ HOC å°è£…ç»„ä»¶å¹¶æ³¨å…¥ props](#--%E7%94%A8-hoc-%E5%B0%81%E8%A3%85%E7%BB%84%E4%BB%B6%E5%B9%B6%E6%B3%A8%E5%85%A5-props)
    - [- åµŒå¥— HOC - å°è£…ç»„ä»¶ï¼Œprops æ³¨å…¥ï¼Œè¿æ¥åˆ° redux ğŸŒŸ](#--%E5%B5%8C%E5%A5%97-hoc---%E5%B0%81%E8%A3%85%E7%BB%84%E4%BB%B6props-%E6%B3%A8%E5%85%A5%E8%BF%9E%E6%8E%A5%E5%88%B0-redux-)
  - [Redux è¿æ¥ç»„ä»¶](#redux-%E8%BF%9E%E6%8E%A5%E7%BB%84%E4%BB%B6)
    - [- Redux ç‰ˆè®¡æ•°å™¨](#--redux-%E7%89%88%E8%AE%A1%E6%95%B0%E5%99%A8)
    - [- Redux ç‰ˆè®¡æ•°å™¨ï¼Œå¸¦è‡ªå®šä¹‰ props](#--redux-%E7%89%88%E8%AE%A1%E6%95%B0%E5%99%A8%E5%B8%A6%E8%87%AA%E5%AE%9A%E4%B9%89-props)
    - [- Redux ç‰ˆè®¡æ•°å™¨ï¼Œé›†æˆ `redux-thunk`](#--redux-%E7%89%88%E8%AE%A1%E6%95%B0%E5%99%A8%E9%9B%86%E6%88%90-redux-thunk)
  - [Context](#context)
    - [ThemeContext](#themecontext)
    - [ThemeProvider](#themeprovider)
    - [ThemeConsumer](#themeconsumer)
    - [ThemeConsumer Class ç‰ˆ](#themeconsumer-class-%E7%89%88)
  - [Hooks](#hooks)
    - [- useState](#--usestate)
    - [- useReducer](#--usereducer)
    - [- useContext](#--usecontext)
- [Redux - ç±»å‹æ¨¡å¼](#redux---%E7%B1%BB%E5%9E%8B%E6%A8%A1%E5%BC%8F)
  - [Store é…ç½®](#store-%E9%85%8D%E7%BD%AE)
    - [åˆ›å»ºå…¨å±€ Store ç±»å‹](#%E5%88%9B%E5%BB%BA%E5%85%A8%E5%B1%80-store-%E7%B1%BB%E5%9E%8B)
    - [åˆ›å»º Store](#%E5%88%9B%E5%BB%BA-store)
  - [Action Creators ğŸŒŸ](#action-creators-)
  - [Reducers](#reducers)
    - [æ‹¥æœ‰ Type å±‚é¢ä¸å¯å˜æ€§çš„ State](#%E6%8B%A5%E6%9C%89-type-%E5%B1%82%E9%9D%A2%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%80%A7%E7%9A%84-state)
    - [reducer ç±»å‹å£°æ˜](#reducer-%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E)
    - [ä½¿ç”¨ `typesafe-actions` è¿›è¡Œ reducer ç±»å‹å£°æ˜](#%E4%BD%BF%E7%94%A8-typesafe-actions-%E8%BF%9B%E8%A1%8C-reducer-%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E)
    - [æµ‹è¯• reducer](#%E6%B5%8B%E8%AF%95-reducer)
  - [ä½¿ç”¨ `redux-observable` ç¼–å†™å¼‚æ­¥æµ](#%E4%BD%BF%E7%94%A8-redux-observable-%E7%BC%96%E5%86%99%E5%BC%82%E6%AD%A5%E6%B5%81)
    - [epics ç±»å‹å£°æ˜](#epics-%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E)
    - [æµ‹è¯• epics](#%E6%B5%8B%E8%AF%95-epics)
  - [ä½¿ç”¨ `reselect` ç”Ÿæˆ Selectors](#%E4%BD%BF%E7%94%A8-reselect-%E7%94%9F%E6%88%90-selectors)
  - [ä½¿ç”¨ `react-redux` çš„ connect æ–¹æ³•](#%E4%BD%BF%E7%94%A8-react-redux-%E7%9A%84-connect-%E6%96%B9%E6%B3%95)
    - [è¿æ¥ç»„ä»¶ç±»å‹å£°æ˜](#%E8%BF%9E%E6%8E%A5%E7%BB%84%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E)
    - [è¿æ¥ç»„ä»¶ç±»å‹å£°æ˜ï¼Œå¹¶é›†æˆ `redux-thunk`](#%E8%BF%9E%E6%8E%A5%E7%BB%84%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E%E5%B9%B6%E9%9B%86%E6%88%90-redux-thunk)
- [é…ç½®å’Œå¼€å‘è€…å·¥å…·](#%E9%85%8D%E7%BD%AE%E5%92%8C%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7)
  - [é€šç”¨ Npm Scripts](#%E9%80%9A%E7%94%A8-npm-scripts)
  - [tsconfig.json](#tsconfigjson)
  - [TSLib](#tslib)
  - [TSLint](#tslint)
  - [ESLint](#eslint)
  - [Jest](#jest)
  - [é£æ ¼æŒ‡å—](#%E9%A3%8E%E6%A0%BC%E6%8C%87%E5%8D%97)
    - ["react-styleguidist"](#react-styleguidist)
- [é£Ÿè°±](#%E9%A3%9F%E8%B0%B1)
    - [é€šç”¨å°è´´å£«](#%E9%80%9A%E7%94%A8%E5%B0%8F%E8%B4%B4%E5%A3%AB)
    - [module ç¯å¢ƒå£°æ˜å°è´´å£«](#module-%E7%8E%AF%E5%A2%83%E5%A3%B0%E6%98%8E%E5%B0%8F%E8%B4%B4%E5%A3%AB)
    - [ç±»å‹å®šä¹‰å°è´´å£«](#%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E5%B0%8F%E8%B4%B4%E5%A3%AB)
    - [ç±»å‹æ‰©å±•å°è´´å£«](#%E7%B1%BB%E5%9E%8B%E6%89%A9%E5%B1%95%E5%B0%8F%E8%B4%B4%E5%A3%AB)
  - [æ•™ç¨‹å’Œæ–‡ç« ](#%E6%95%99%E7%A8%8B%E5%92%8C%E6%96%87%E7%AB%A0)
  - [è´¡çŒ®è€…](#%E8%B4%A1%E7%8C%AE%E8%80%85)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

---

# å®‰è£…

### React & Redux çš„ç±»å‹å®šä¹‰
```
npm i -D @types/react @types/react-dom @types/react-redux
```

"react" - `@types/react`  
"react-dom" - `@types/react-dom`  
"redux" - (types included with npm package)*  
"react-redux" - `@types/react-redux`  

> *æç¤º: æœ¬æŒ‡å—çš„ç±»å‹ç³»ç»Ÿé€‚ç”¨äº Redux >= v4.x.xã€‚å¦‚æœæƒ³ç”¨äº Redux v3.x.x è¯·æŸ¥çœ‹ [è¿™ä¸ªé…ç½®](https://github.com/piotrwitek/react-redux-typescript-guide/blob/master/playground/tsconfig.json#L5))  

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

# React - ç±»å‹å®šä¹‰é€ŸæŸ¥è¡¨

### `React.FC<Props>` | `React.FunctionComponent<Props>`
è¡¨ç¤ºå‡½æ•°ç»„ä»¶çš„ç±»å‹
```tsx
const MyComponent: React.FC<Props> = ...
```

### `React.Component<Props, State>`
è¡¨ç¤º class ç»„ä»¶çš„ç±»å‹
```tsx
class MyComponent extends React.Component<Props, State> { ...
```

### `React.ComponentType<Props>`
è¡¨ç¤º (React.FC<Props> | React.Component<Props>) é›†åˆçš„ç±»å‹ - ç”¨äº HOC
```tsx
const withState = <P extends WrappedComponentProps>(
  WrappedComponent: React.ComponentType<P>,
) => { ...
```

### `React.ComponentProps<typeof XXX>`
å–å¾—ç»„ä»¶ XXX çš„ Props ç±»å‹ï¼ˆè­¦å‘Šï¼šæ— æ³•ç”¨äºé™æ€å£°æ˜çš„ default props ä»¥åŠæ³›å‹ propsï¼‰
```tsx
type MyComponentProps = React.ComponentProps<typeof MyComponent>;
```

### `React.ReactElement` | `JSX.Element`
è¡¨ç¤º React ä¸­ Element æ¦‚å¿µçš„ç±»å‹ - è¡¨ç¤ºä¸€ä¸ªåŸç”Ÿ DOM ç»„ä»¶ï¼ˆæ¯”å¦‚ `<div />`ï¼‰æˆ–ç”¨æˆ·è‡ªå®šä¹‰çš„å¤åˆç»„ä»¶ ï¼ˆæ¯”å¦‚ `<MyComponent />`ï¼‰
```tsx
const elementOnly: React.ReactElement = <div /> || <MyComponent />;
```

### `React.ReactNode`
è¡¨ç¤ºä»»æ„ç±»å‹çš„ React èŠ‚ç‚¹ï¼ˆç›¸å½“äº ReactElement (åŒ…æ‹¬ Fragments å’Œ Portals) + åŸå§‹ JS ç±»å‹ï¼‰
```tsx
const elementOrPrimitive: React.ReactNode = 'string' || 0 || false || null || undefined || <div /> || <MyComponent />;
const Component = ({ children: React.ReactNode }) => ...
```

### `React.CSSProperties`
è¡¨ç¤º JSX ä¸­æ ·å¼å¯¹è±¡çš„ç±»å‹ - å®ç° css-in-js é£æ ¼
```tsx
const styles: React.CSSProperties = { flexDirection: 'row', ...
const element = <div style={styles} ...
```

### `React.HTMLProps<HTMLXXXElement>`
è¡¨ç¤ºæŒ‡å®š HTML å…ƒç´ çš„ç±»å‹ - ç”¨äºæ‰©å±• HTML å…ƒç´ 
```tsx
const Input: React.FC<Props & React.HTMLProps<HTMLInputElement>> = props => { ... }

<Input about={...} accept={...} alt={...} ... />
```

### `React.ReactEventHandler<HTMLXXXElement>`
è¡¨ç¤º event handler çš„æ³›å‹ç±»å‹ - ç”¨äºå£°æ˜ event handlers
```tsx
const handleChange: React.ReactEventHandler<HTMLInputElement> = (ev) => { ... } 

<input onChange={handleChange} ... />
```

### `React.XXXEvent<HTMLXXXElement>`
è¡¨ç¤ºæ›´å¤šç‰¹æ®Š eventã€‚ä¸€äº›å¸¸è§çš„ event ä¾‹å¦‚ï¼š`ChangeEvent, FormEvent, FocusEvent, KeyboardEvent, MouseEvent, DragEvent, PointerEvent, WheelEvent, TouchEvent`ã€‚
```tsx
const handleChange = (ev: React.MouseEvent<HTMLDivElement>) => { ... }

<div onMouseMove={handleChange} ... />
```

ä¸Šä¸€æ®µä»£ç ä¸­çš„ `React.MouseEvent<HTMLDivElement>` è¡¨ç¤ºé¼ æ ‡äº‹ä»¶çš„ç±»å‹ï¼Œè¿™ä¸ªäº‹ä»¶æŒ‚è½½åœ¨ `HTMLDivElement` ä¸Šã€‚

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

# React - ç±»å‹æ¨¡å¼

## Function Components - FC

### - è®¡æ•°å™¨ç»„ä»¶

::codeblock='playground/src/components/fc-counter.tsx'::

[âŸ©âŸ©âŸ© demo](https://piotrwitek.github.io/react-redux-typescript-guide/#fccounter)

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### - ç»„ä»¶çš„ [å±æ€§å±•å¼€](https://zh-hans.reactjs.org/docs/jsx-in-depth.html#spread-attributes)

::codeblock='playground/src/components/fc-spread-attributes.tsx'::

[âŸ©âŸ©âŸ© demo](https://piotrwitek.github.io/react-redux-typescript-guide/#fcspreadattributes)

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

## Class Components

### - è®¡æ•°å™¨ç»„ä»¶ Class ç‰ˆ

::codeblock='playground/src/components/class-counter.tsx'::

[âŸ©âŸ©âŸ© demo](https://piotrwitek.github.io/react-redux-typescript-guide/#classcounter)

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### - Class ç»„ä»¶å’Œ default props

::codeblock='playground/src/components/class-counter-with-default-props.tsx'::

[âŸ©âŸ©âŸ© demo](https://piotrwitek.github.io/react-redux-typescript-guide/#classcounterwithdefaultprops)

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

## æ³›å‹ç»„ä»¶
- æ˜“äºç”Ÿæˆä¸åŒç±»å‹çš„å˜ç§ç»„ä»¶ï¼ŒåŒæ—¶å¤ç”¨å…¬å…±é€»è¾‘
- å¸¸è§çš„ç”¨ä¾‹æ˜¯æ³›å‹åˆ—è¡¨ç»„ä»¶

### - æ³›å‹åˆ—è¡¨ç»„ä»¶

::codeblock='playground/src/components/generic-list.tsx'::

[âŸ©âŸ©âŸ© demo](https://piotrwitek.github.io/react-redux-typescript-guide/#genericlist)

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

## Render Props
> https://zh-hans.reactjs.org/docs/render-props.html

### - Name Provider ç»„ä»¶
> å°† children ç”¨ä½œ render prop çš„ç®€å•ç»„ä»¶

::codeblock='playground/src/components/name-provider.tsx'::

[âŸ©âŸ©âŸ© demo](https://piotrwitek.github.io/react-redux-typescript-guide/#nameprovider)

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### - Mouse Provider ç»„ä»¶
> `Mouse` ç»„ä»¶çš„ä¾‹å­æ¥æºäº [Render Props - React æ–‡æ¡£](https://zh-hans.reactjs.org/docs/render-props.html#use-render-props-for-cross-cutting-concerns)

::codeblock='playground/src/components/mouse-provider.tsx'::

[âŸ©âŸ©âŸ© demo](https://piotrwitek.github.io/react-redux-typescript-guide/#mouseprovider)

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

## é«˜é˜¶ç»„ä»¶
> https://zh-hans.reactjs.org/docs/higher-order-components.html

### - ç”¨ HOC å°è£…ä¸€ä¸ªç»„ä»¶
ç»™æ— çŠ¶æ€çš„è®¡æ•°å™¨åŠ ä¸ŠçŠ¶æ€

::codeblock='playground/src/hoc/with-state.tsx'::
::expander='playground/src/hoc/with-state.usage.tsx'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### - ç”¨ HOC å°è£…ç»„ä»¶å¹¶æ³¨å…¥ props
ç”¨ componentDidCatch ç»™ä»»æ„ç»„ä»¶åŠ ä¸Šé”™è¯¯å¤„ç†åŠŸèƒ½

::codeblock='playground/src/hoc/with-error-boundary.tsx'::
::expander='playground/src/hoc/with-error-boundary.usage.tsx'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### - åµŒå¥— HOC - å°è£…ç»„ä»¶ï¼Œprops æ³¨å…¥ï¼Œè¿æ¥åˆ° redux ğŸŒŸ
ç”¨ componentDidCatch ç»™ä»»æ„ç»„ä»¶åŠ ä¸Šé”™è¯¯å¤„ç†åŠŸèƒ½

::codeblock='playground/src/hoc/with-connected-count.tsx'::
::expander='playground/src/hoc/with-connected-count.usage.tsx'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

## Redux è¿æ¥ç»„ä»¶

### - Redux ç‰ˆè®¡æ•°å™¨

::codeblock='playground/src/connected/fc-counter-connected.tsx'::
::expander='playground/src/connected/fc-counter-connected.usage.tsx'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### - Redux ç‰ˆè®¡æ•°å™¨ï¼Œå¸¦è‡ªå®šä¹‰ props

::codeblock='playground/src/connected/fc-counter-connected-own-props.tsx'::
::expander='playground/src/connected/fc-counter-connected-own-props.usage.tsx'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### - Redux ç‰ˆè®¡æ•°å™¨ï¼Œé›†æˆ `redux-thunk`

::codeblock='playground/src/connected/fc-counter-connected-bind-action-creators.tsx'::
::expander='playground/src/connected/fc-counter-connected-bind-action-creators.usage.tsx'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

## Context

> https://zh-hans.reactjs.org/docs/context.html

### ThemeContext

::codeblock='playground/src/context/theme-context.ts'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### ThemeProvider

::codeblock='playground/src/context/theme-provider.tsx'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### ThemeConsumer

::codeblock='playground/src/context/theme-consumer.tsx'::

### ThemeConsumer Class ç‰ˆ

::codeblock='playground/src/context/theme-consumer-class.tsx'::

[Implementation with Hooks](#--usecontext)

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

## Hooks

> https://zh-hans.reactjs.org/docs/hooks-intro.html

### - useState

> https://zh-hans.reactjs.org/docs/hooks-reference.html#usestate

::codeblock='playground/src/hooks/use-state.tsx'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### - useReducer
ç”¨äºå‡½æ•°ç»„ä»¶çš„çŠ¶æ€ç®¡ç† Hook ï¼ˆç±»ä¼¼ Reduxï¼‰ã€‚

::codeblock='playground/src/hooks/use-reducer.tsx'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### - useContext

> https://zh-hans.reactjs.org/docs/hooks-reference.html#usecontext

::codeblock='playground/src/hooks/use-theme-context.tsx'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

# Redux - ç±»å‹æ¨¡å¼

## Store é…ç½®

### åˆ›å»ºå…¨å±€ Store ç±»å‹

#### `RootState` - è¡¨ç¤ºæ ¹ state æ ‘çš„ç±»å‹
å¯ä»¥ä½œä¸º importï¼Œä½¿ç”¨ Redux `connect` æ–¹æ³•è¿æ¥ç»„ä»¶æ—¶ï¼Œèƒ½å¤Ÿç¡®ä¿ç±»å‹å®‰å…¨æ€§

#### `RootAction` - è¡¨ç¤ºæ‰€æœ‰ action å¯¹è±¡é›†åˆçš„ç±»å‹
å¯ä»¥ä½œä¸º importï¼Œç”¨äºä¸åŒå±‚æ¬¡ä¸­ï¼ˆreducers, sagas æˆ– redux-observables epicsï¼‰æ¥æ”¶å’Œå‘é€ redux actions

::codeblock='playground/src/store/types.d.ts'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### åˆ›å»º Store

å½“åˆ›å»º store å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¼–å†™ä»»ä½•é¢å¤–çš„ç±»å‹ï¼Œå®ƒä¼šé€šè¿‡ç±»å‹æ¨æ–­è‡ªåŠ¨å»ºç«‹ä¸€ä¸ª**ç±»å‹å®‰å…¨çš„ Store å®ä¾‹**ã€‚
> ç”Ÿæˆçš„ store å®ä¾‹ä¸­çš„æ–¹æ³•ï¼ˆåƒ `getState` å’Œ `dispatch`ï¼‰å°†æ”¯æŒç±»å‹æ£€æŸ¥ï¼Œå¹¶èƒ½å¤Ÿæš´éœ²æ‰€æœ‰çš„ç±»å‹é”™è¯¯ã€‚

::codeblock='playground/src/store/index.ts'::

---

## Action Creators ğŸŒŸ

> æˆ‘ä»¬å°†ä½¿ç”¨æˆç†Ÿçš„è¾…åŠ©åº“ [`typesafe-actions`](https://github.com/piotrwitek/typesafe-actions#typesafe-actions) [![Latest Stable Version](https://img.shields.io/npm/v/typesafe-actions.svg)](https://www.npmjs.com/package/typesafe-actions) [![NPM Downloads](https://img.shields.io/npm/dt/typesafe-actions.svg)](https://www.npmjs.com/package/typesafe-actions) å®ƒè¢«è®¾è®¡æˆä¾¿äºä½¿ç”¨ **TypeScript** æ¥å†™ **Redux**ã€‚

> æŸ¥çœ‹è¿™ä¸ªè¿›é˜¶æ•™ç¨‹æ¥å­¦ä¹ æ›´å¤šï¼š[Typesafe-Actions - Tutorial](https://github.com/piotrwitek/typesafe-actions#tutorial)!

ä¸‹é¢çš„æ–¹æ¡ˆç”¨ä¸€ä¸ªç®€å•çš„å·¥å‚å‡½æ•°æ¥è‡ªåŠ¨åˆ›å»ºç±»å‹å®‰å…¨çš„ action creatorsã€‚ç›®çš„æ˜¯å‡å°‘é‡å¤çš„ actions å’Œ creators ç±»å‹å£°æ˜ä»£ç ï¼Œå¹¶å‡å°‘ä»£ç ç»´æŠ¤å·¥ä½œã€‚ç”Ÿæˆç»“æœæ˜¯ç»å¯¹ç±»å‹å®‰å…¨çš„ action-creators åŠå…¶ actionsã€‚

::codeblock='playground/src/features/counters/actions.ts'::
::expander='playground/src/features/counters/actions.usage.ts'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

## Reducers

### æ‹¥æœ‰ Type å±‚é¢ä¸å¯å˜æ€§çš„ State
ç”¨ `readonly` ä¿®é¥°ç¬¦å£°æ˜ reducer ä¸­ `State` çš„ç±»å‹ï¼Œå¯ä»¥è·å¾—ç¼–è¯‘æ—¶çš„ä¸å¯å˜æ€§
```ts
export type State = {
  readonly counter: number;
  readonly todos: ReadonlyArray<string>;
};
```

Readonly ä¿®é¥°ç¬¦å…è®¸åˆå§‹åŒ–ï¼Œä½†ä¸å…è®¸é‡æ–°èµ‹å€¼ï¼ˆç¼–è¯‘å™¨ä¼šæç¤ºé”™è¯¯ï¼‰
```ts
export const initialState: State = {
  counter: 0,
}; // OK

initialState.counter = 3; // TS Error: cannot be mutated
```

è¿™å¯¹ **JS ä¸­çš„ æ•°ç»„** å¾ˆèµ·æ•ˆï¼Œå› ä¸ºç”¨ (`push`, `pop`, `splice`, ...) è¿™æ ·çš„èµ‹å€¼æ–¹æ³•å°†ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ (`concat`, `map`, `slice`,...) è¿™æ ·çš„ä¸å¯å˜æ–¹æ³•ä¾ç„¶æ˜¯å…è®¸çš„ã€‚
```ts
state.todos.push('Learn about tagged union types') // TS Error: Property 'push' does not exist on type 'ReadonlyArray<string>'
const newTodos = state.todos.concat('Learn about tagged union types') // OK
```

#### è­¦å‘Š - `Readonly` ä¸æ˜¯é€’å½’çš„
è¿™æ„å‘³ç€ `readonly` ä¿®é¥°ç¬¦åœ¨å¯¹è±¡çš„åµŒå¥—ç»“æ„ä¸­ä¸ä¼šå‘ä¸‹ä¼ é€’ä¸å˜æ€§ã€‚ä½ éœ€è¦æ ‡è®°æ¯ä¸ªå±‚çº§çš„æ¯ä¸ªå±æ€§ã€‚ï¼ˆè¯‘æ³¨ï¼š`Readonly` æ˜¯æµ…æ¯”è¾ƒçš„ï¼‰

> **å°è´´å£«ï¼š** ä½¿ç”¨ `Readonly` æˆ– `ReadonlyArray` [æ˜ å°„ç±»å‹](https://www.tslang.cn/docs/handbook/advanced-types.html)

```ts
export type State = Readonly<{
  counterPairs: ReadonlyArray<Readonly<{
    immutableCounter1: number,
    immutableCounter2: number,
  }>>,
}>;

state.counterPairs[0] = { immutableCounter1: 1, immutableCounter2: 1 }; // TS Error: cannot be mutated
state.counterPairs[0].immutableCounter1 = 1; // TS Error: cannot be mutated
state.counterPairs[0].immutableCounter2 = 1; // TS Error: cannot be mutated
```

#### è§£å†³æ–¹æ¡ˆ - `Readonly` çš„é€’å½’ç‰ˆæœ¬æ˜¯ `DeepReadonly`

ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [`DeepReadonly`](https://github.com/piotrwitek/utility-types#deepreadonlyt) ç±»å‹ï¼ˆæ¥è‡ª `utility-types`ï¼‰ã€‚

```ts
import { DeepReadonly } from 'utility-types';

export type State = DeepReadonly<{
  containerObject: {
    innerValue: number,
    numbers: number[],
  }
}>;

state.containerObject = { innerValue: 1 }; // TS Error: cannot be mutated
state.containerObject.innerValue = 1; // TS Error: cannot be mutated
state.containerObject.numbers.push(1); // TS Error: cannot use mutator methods
```


[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### reducer ç±»å‹å£°æ˜

> ä¸ºäº†ç†è§£ä¸‹ä¸€å°èŠ‚ï¼Œè¯·ç¡®ä¿äº†è§£ [ç±»å‹æ¨è®º](https://www.tslang.cn/docs/handbook/type-inference.html)ï¼Œ[åŸºäºæ§åˆ¶æµçš„ç±»å‹åˆ†æ](https://www.tslang.cn/docs/release-notes/typescript-2.0.html) ä»¥åŠ [æ ‡è®°è”åˆç±»å‹](https://www.tslang.cn/docs/release-notes/typescript-2.0.html)

::codeblock='playground/src/features/todos/reducer.ts'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### ä½¿ç”¨ `typesafe-actions` è¿›è¡Œ reducer ç±»å‹å£°æ˜
> è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨ API ä¸Šä½¿ç”¨ä»»ä½•æ³›å‹ç±»å‹å‚æ•°ã€‚å¯ä»¥å’Œä¼ ç»Ÿçš„ reducer å†™æ³•è¿›è¡Œæ¯”è¾ƒï¼Œå®ƒä»¬æ˜¯ç­‰ä»·çš„ã€‚

::codeblock='playground/src/features/todos/reducer-ta.ts'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### æµ‹è¯• reducer

::codeblock='playground/src/features/todos/reducer.spec.ts'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

## ä½¿ç”¨ `redux-observable` ç¼–å†™å¼‚æ­¥æµ

### epics ç±»å‹å£°æ˜

::codeblock='playground/src/features/todos/epics.ts'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### æµ‹è¯• epics

::codeblock='playground/src/features/todos/epics.spec.ts'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

## ä½¿ç”¨ `reselect` ç”Ÿæˆ Selectors

::codeblock='playground/src/features/todos/selectors.ts'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

## ä½¿ç”¨ `react-redux` çš„ connect æ–¹æ³•

### è¿æ¥ç»„ä»¶ç±»å‹å£°æ˜

*__æ³¨æ„__ï¼šåœ¨ä¸‹é¢ä¸€æ®µä»£ç ä¸­ï¼Œåªæœ‰å…³äº connect ç±»å‹å£°æ˜èƒŒåæ¦‚å¿µçš„ç®€çŸ­è¯´æ˜ã€‚è¯·æŸ¥çœ‹ [Redux è¿æ¥ç»„ä»¶](#redux-%e8%bf%9e%e6%8e%a5%e7%bb%84%e4%bb%b6) ç« èŠ‚äº†è§£æ›´å¤šæ›´å…·ä½“çš„ä¾‹å­*

```tsx
import MyTypes from 'MyTypes';

import { bindActionCreators, Dispatch, ActionCreatorsMapObject } from 'redux';
import { connect } from 'react-redux';

import { countersActions } from '../features/counters';
import { FCCounter } from '../components';

// Type annotation for "state" argument is mandatory to check 
// the correct shape of state object and injected props you can also
// extend connected component Props interface by annotating `ownProps` argument
const mapStateToProps = (state: MyTypes.RootState, ownProps: FCCounterProps) => ({
  count: state.counters.reduxCounter,
});

// "dispatch" argument needs an annotation to check the correct shape
//  of an action object when using dispatch function
const mapDispatchToProps = (dispatch: Dispatch<MyTypes.RootAction>) =>
  bindActionCreators({
    onIncrement: countersActions.increment,
  }, dispatch);

// shorter alternative is to use an object instead of mapDispatchToProps function
const dispatchToProps = {
    onIncrement: countersActions.increment,
};

// Notice we don't need to pass any generic type parameters to neither
// the connect function below nor map functions declared above
// because type inference will infer types from arguments annotations automatically
// This is much cleaner and idiomatic approach
export const FCCounterConnected =
  connect(mapStateToProps, mapDispatchToProps)(FCCounter);

// You can add extra layer of validation of your action creators
// by using bindActionCreators generic type parameter and RootAction type
const mapDispatchToProps = (dispatch: Dispatch<MyTypes.RootAction>) =>
  bindActionCreators<ActionCreatorsMapObject<Types.RootAction>>({
    invalidActionCreator: () => 1, // Error: Type 'number' is not assignable to type '{ type: "todos/ADD"; payload: Todo; } | { ... }
  }, dispatch);

```

### è¿æ¥ç»„ä»¶ç±»å‹å£°æ˜ï¼Œå¹¶é›†æˆ `redux-thunk`

*__æ³¨æ„__ï¼šä½¿ç”¨ thunk action creators æ—¶ä½ éœ€è¦ä½¿ç”¨ `bindActionCreators`ã€‚åªæœ‰è¿™æ ·ï¼Œä½ æ‰èƒ½è·å¾—æ­£ç¡®çš„ dispatch props ç±»å‹ç­¾åï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚*

*__è­¦å‘Š__: ç›®å‰ï¼ˆ2019 å››æœˆï¼‰æœ€æ–°ç‰ˆ `redux-thunk` ä¸­çš„ `bindActionCreators` ç­¾åä¸ä¼šåƒä¸‹é¢é‚£æ ·æ­£å¸¸å·¥ä½œï¼Œä½ éœ€è¦ä½¿ç”¨ [`/playground/typings/redux-thunk/index.d.ts`](./playground/typings/redux-thunk/index.d.ts) ä¸­æ”¹è‰¯çš„ç±»å‹å®šä¹‰å¹¶è¦†å†™ tsconfig ä¸­çš„ `paths` å­—æ®µï¼Œåƒè¿™æ ·ï¼š [`"paths":{"redux-thunk":["typings/redux-thunk"]}`](./playground/tsconfig.json)ã€‚*

```tsx
const thunkAsyncAction = () => async (dispatch: Dispatch): Promise<void> => {
  // dispatch actions, return Promise, etc.
}

const mapDispatchToProps = (dispatch: Dispatch<Types.RootAction>) =>
  bindActionCreators(
    {
      thunkAsyncAction,
    },
    dispatch
  );

type DispatchProps = ReturnType<typeof mapDispatchToProps>;
// { thunkAsyncAction: () => Promise<void>; }

/* Without "bindActionCreators" fix signature will be the same as the original "unbound" thunk function: */
// { thunkAsyncAction: () => (dispatch: Dispatch<AnyAction>) => Promise<void>; }
```

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

# é…ç½®å’Œå¼€å‘è€…å·¥å…·

## é€šç”¨ Npm Scripts
> é€šç”¨çš„ã€è·¨é¡¹ç›®çš„ã€ TS ç›¸å…³çš„ npm scripts
```
"prettier": "prettier --list-different 'src/**/*.ts' || (echo '\nPlease fix code formatting by running:\nnpm run prettier:fix\n'; exit 1)",
"prettier:fix": "prettier --write 'src/**/*.ts'",
"lint": "tslint -p ./",
"tsc": "tsc -p ./ --noEmit",
"tsc:watch": "tsc -p ./ --noEmit -w",
"test": "jest --config jest.config.json",
"test:watch": "jest --config jest.config.json --watch",
"test:update": "jest --config jest.config.json -u"
"ci-check": "npm run prettier && npm run lint && npm run tsc && npm run test",
```

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

## tsconfig.json

æˆ‘ä»¬æœ‰æ¨èçš„ `tsconfig.json` é…ç½®æ–‡ä»¶ï¼Œä½ å¯ä»¥å€ŸåŠ© [`react-redux-typescript-scripts`](https://github.com/piotrwitek/react-redux-typescript-scripts) æ–¹ä¾¿åœ°æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„é¡¹ç›®é‡Œã€‚

::expander='playground/tsconfig.json'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

## TSLib
https://www.npmjs.com/package/tslib

è¿™ä¸ªåº“é€šè¿‡æŠŠè¿è¡Œæ—¶è¾…åŠ©å‡½æ•°å¤–ç½®åŒ–ï¼Œè€Œä¸æ˜¯å†…åµŒåˆ°æ¯ä¸ªæ–‡ä»¶ä¸­ï¼Œæ¥å‡å°‘ä½ çš„æ‰“åŒ…æ–‡ä»¶å¤§å°ã€‚

> å®‰è£…  
`npm i tslib`

æŠŠè¿™è¡ŒåŠ åˆ°ä½ çš„ `tsconfig.json` ä¸­ï¼š
```ts
"compilerOptions": {
  "importHelpers": true
}
```

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

## TSLint
https://palantir.github.io/tslint/

> å®‰è£…  
`npm i -D tslint`

> å¦‚æœç”¨äº React é¡¹ç›®ï¼Œä½ åº”è¯¥åŠ ä¸Šé¢å¤–çš„ `react` è§„åˆ™é›†ï¼š`npm i -D tslint-react` https://github.com/palantir/tslint-react  

æˆ‘ä»¬æœ‰æ¨èé…ç½®æ–‡ä»¶ï¼Œä½ å¯ä»¥å€ŸåŠ© [`react-redux-typescript-scripts`](https://github.com/piotrwitek/react-redux-typescript-scripts) æ–¹ä¾¿åœ°æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„é¡¹ç›®é‡Œã€‚

#### tslint.json
::expander='playground/tslint.json'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

## ESLint
https://eslint.org/  
https://typescript-eslint.io

> å®‰è£…  
`npm i -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin`

æˆ‘ä»¬æœ‰æ¨èé…ç½®æ–‡ä»¶ï¼Œä»–ä¼šè‡ªåŠ¨æ·»åŠ  TypeScript çš„è§£æå™¨å’Œæ’ä»¶ï¼Œä½ å¯ä»¥å€ŸåŠ© [`react-redux-typescript-scripts`](https://github.com/piotrwitek/react-redux-typescript-scripts) æ–¹ä¾¿åœ°æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„é¡¹ç›®é‡Œã€‚

#### .eslintrc
::expander='playground/.eslintrc'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

## Jest
https://jestjs.io/

> å®‰è£…  
`npm i -D jest ts-jest @types/jest`

#### jest.config.json
::expander='configs/jest.config.json'::

#### jest.stubs.js
::expander='configs/jest.stubs.js'::

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

## é£æ ¼æŒ‡å—

### ["react-styleguidist"](https://github.com/styleguidist/react-styleguidist)

[âŸ©âŸ©âŸ© styleguide.config.js](/playground/styleguide.config.js)  

[âŸ©âŸ©âŸ© demo](https://piotrwitek.github.io/react-redux-typescript-guide/)

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

# é£Ÿè°±

### é€šç”¨å°è´´å£«

#### - ä½¿ç”¨ TS æ—¶æˆ‘è¿˜éœ€è¦ä½¿ç”¨ React.PropTypes å—ï¼Ÿ
ä¸ã€‚ç”¨äº† TypeScript ä¹‹åï¼Œæ²¡æœ‰å¿…è¦å†ä½¿ç”¨ PropTypesã€‚å½“å£°æ˜ Props å’Œ State æ¥å£åï¼Œä½ å°†é€šè¿‡é™æ€ç±»å‹æ£€æŸ¥è·å¾—å®Œå…¨çš„è‡ªåŠ¨è¡¥å…¨å’Œç¼–ç æ—¶çš„å®‰å…¨æ€§ã€‚è¿™æ ·ï¼Œä½ å°±èƒ½ç›´æ¥é¿å…è¿è¡Œæ—¶é”™è¯¯ï¼Œå¹¶å‡å°‘å¤§é‡è°ƒè¯•æ—¶é—´ã€‚é¢å¤–çš„å¥½å¤„æ˜¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§ç”¨äºåœ¨æºç ä¸­è§£é‡Šç»„ä»¶å…¬å…± API çš„ä¼˜é›…è€Œæ ‡å‡†åŒ–çš„æ–¹æ³•ã€‚

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

#### - ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ `interface` å£°æ˜ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨ `type` åˆ«å?
ä»å®é™…æ¥çœ‹ï¼Œä½¿ç”¨ `interface` å£°æ˜åœ¨ç¼–è¯‘é”™è¯¯æ—¶ä¼šç”Ÿæˆä¸€ä¸ª interface åŒåæ ‡è¯†ï¼Œç›¸å `type` åˆ«åä¸ä¼šç”Ÿæˆæ ‡è¯†åï¼Œå¹¶ä¸”ä¼šå±•å¼€æ˜¾ç¤ºæ‰€æœ‰å±æ€§å’ŒåµŒå¥—çš„ç±»å‹ã€‚
å°½ç®¡æˆ‘å¤§éƒ¨åˆ†æ—¶å€™æ›´å–œæ¬¢ç”¨ `type` ï¼Œä½†æ˜¯æœ‰æ—¶å€™ç¼–è¯‘é”™è¯¯è¿‡äºå†—é•¿å½±å“æ’æŸ¥ï¼Œæˆ‘ä¼šæ ¹æ®ä¸¤è€…çš„å·®åˆ«ï¼Œæ”¹ç”¨ interface æ¥éšè—æŠ¥é”™ä¸­æ²¡é‚£ä¹ˆé‡è¦çš„ç±»å‹ç»†èŠ‚ã€‚
ç›¸å…³çš„ `ts-lint` è§„åˆ™ï¼šhttps://palantir.github.io/tslint/rules/interface-over-type-literal/

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

#### - å…·å exports å’Œ default export é‚£ä¸ªæ¯”è¾ƒå¥½ï¼Ÿ
ä¸€ä¸ªå¸¸è§çš„é€‚åº”æ€§æ–¹æ¡ˆæ˜¯ä½¿ç”¨æ–‡ä»¶å¤¹æ¨¡å—æ¨¡å¼ï¼Œè¿™æ ·ä½ å¯ä»¥æ ¹æ®æƒ…å†µåŒæ—¶ä½¿ç”¨å…·åå’Œé»˜è®¤ importã€‚
è¿™ä¸ªæ–¹æ¡ˆçš„å¥½å¤„æ˜¯ä½ èƒ½å®ç°æ›´å¥½çš„å°è£…ï¼Œä»¥åŠèƒ½å¤Ÿå®‰å…¨åœ°é‡æ„å†…éƒ¨å‘½åå’Œæ–‡ä»¶å¤¹ç»“æ„ï¼Œè€Œä¸å½±å“ä½ çš„ä¸šåŠ¡ä»£ç ï¼š

```ts
// 1. create your component files (`select.tsx`) using default export in some folder:

// components/select.tsx
const Select: React.FC<Props> = (props) => {
...
export default Select;

// 2. in this folder create an `index.ts` file that will re-export components with named exports:

// components/index.ts
export { default as Select } from './select';
...

// 3. now you can import your components in both ways, with named export (better encapsulation) or using default export (internal access):

// containers/container.tsx
import { Select } from '@src/components';
or
import Select from '@src/components/select';
...
```

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

#### - ä»€ä¹ˆæ˜¯åˆå§‹åŒ– class å®ä¾‹æˆ–é™æ€å±æ€§çš„æœ€ä½³å®è·µï¼Ÿ
é¦–é€‰æ–°è¯­æ³•æ¥è¿›è¡Œ class å±æ€§åˆå§‹åŒ–
```tsx
class ClassCounterWithInitialCount extends React.Component<Props, State> {
  // default props using Property Initializers
  static defaultProps: DefaultProps = {
    className: 'default-class',
    initialCount: 0,
  };
  
  // initial state using Property Initializers
  state: State = {
    count: this.props.initialCount,
  };
  ...
}
```

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

#### - ä»€ä¹ˆæ˜¯å£°æ˜ç»„ä»¶ handler æ–¹æ³•çš„æœ€ä½³å®è·µï¼Ÿ
é¦–é€‰æ–°è¯­æ³•ï¼Œç”¨ç®­å¤´å‡½æ•°å£°æ˜ class æ–¹æ³•å­—æ®µ
```tsx
class ClassCounter extends React.Component<Props, State> {
// handlers using Class Fields with arrow functions
  handleIncrement = () => {
    this.setState({ count: this.state.count + 1 });
  };
  ...
}
```

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### module ç¯å¢ƒå£°æ˜å°è´´å£«
ï¼ˆè¯‘æ³¨ï¼š[ç¯å¢ƒå£°æ˜ï¼ˆambientï¼‰](https://jkchao.github.io/typescript-book-chinese/typings/ambient.html) å’Œ [æ¨¡å—æ‰©å±•ï¼ˆaugmentationï¼‰](https://www.tslang.cn/docs/handbook/declaration-merging.html)ï¼‰
#### ç¯å¢ƒå£°æ˜ä¸­çš„ imports
è‹¥è¦è¿›è¡Œ module æ‰©å±•ï¼Œimport åº”è¯¥ä½äº module å£°æ˜å¤–éƒ¨ã€‚
```ts
import { Operator } from 'rxjs/Operator';
import { Observable } from 'rxjs/Observable';

declare module 'rxjs/Subject' {
  interface Subject<T> {
    lift<R>(operator: Operator<T, R>): Observable<R>;
  }
}
```

åˆ›å»ºç¬¬ä¸‰æ–¹ç±»å‹å®šä¹‰æ—¶ï¼Œæ‰€æœ‰ imports åº”è¯¥ä½äº module å£°æ˜å†…éƒ¨ï¼Œå¦åˆ™ imports å°†è¢«è§†ä¸ºæ‰©å±•å¹¶æŠ¥é”™ã€‚

```ts
declare module "react-custom-scrollbars" {
    import * as React from "react";
    export interface positionValues {
    ...
```

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### ç±»å‹å®šä¹‰å°è´´å£«

#### ç¼ºå°‘ç±»å‹å®šä¹‰çš„é”™è¯¯
å¦‚æœä½ æ‰¾ä¸åˆ°ç¬¬ä¸‰æ–¹æ¨¡å—çš„ç±»å‹å£°æ˜ï¼Œä½ å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªï¼Œæˆ–å€ŸåŠ© [Shorthand Ambient Modules](https://github.com/Microsoft/TypeScript-Handbook/blob/master/pages/Modules.md#shorthand-ambient-modules) ç¦ç”¨è¯¥æ¨¡å—çš„ç±»å‹æ£€æŸ¥ã€‚

::codeblock='playground/typings/modules.d.ts'::

#### ä¸º npm æ¨¡å—ä½¿ç”¨è‡ªå®šä¹‰ `d.ts` æ–‡ä»¶
å¦‚æœä½ æƒ³ä¸ºï¼ˆè‡ªå¸¦ç±»å‹å®šä¹‰çš„ï¼‰æŸäº› npm æ¨¡å—ä½¿ç”¨æ›¿ä»£çš„ï¼ˆè‡ªå®šä¹‰çš„ï¼‰ç±»å‹å®šä¹‰ï¼Œä½ å¯ä»¥é€šè¿‡è¦†å†™ç¼–è¯‘é€‰é¡¹ä¸­ `paths` å­—æ®µæ¥å®ç°ã€‚

```ts
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "redux": ["typings/redux"], // use an alternative type-definitions instead of the included one
      ...
    },
    ...,
  }
}
```

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

### ç±»å‹æ‰©å±•å°è´´å£«
å¤–éƒ¨ç±»å‹å®šä¹‰æ–‡ä»¶ï¼ˆ*.d.tsï¼‰ç›¸å…³é—®é¢˜çš„å¤„ç†ç­–ç•¥

#### å¯¹åº“çš„å†…éƒ¨å£°æ˜è¿›è¡Œæ‰©å±• - ä½¿ç”¨ç›¸å¯¹è·¯å¾„ import

```ts
// added missing autoFocus Prop on Input component in "antd@2.10.0" npm package
declare module '../node_modules/antd/lib/input/Input' {
  export interface InputProps {
    autoFocus?: boolean;
  }
}
```

#### å¯¹åº“çš„å…¬å¼€å£°æ˜è¿›è¡Œæ‰©å±• - ä½¿ç”¨ node_modules import

```ts
// fixed broken public type-definitions in "rxjs@5.4.1" npm package
import { Operator } from 'rxjs/Operator';
import { Observable } from 'rxjs/Observable';

declare module 'rxjs/Subject' {
  interface Subject<T> {
    lift<R>(operator: Operator<T, R>): Observable<R>;
  }
}
```

> æ›´å¤šæ­é…ç¬¬ä¸‰æ–¹ç±»å‹å®šä¹‰çš„è¿›é˜¶åœºæ™¯å¯ä»¥åœ¨ [TypeScript å®˜æ–¹æ–‡æ¡£](https://github.com/Microsoft/TypeScript-Handbook/blob/master/pages/Modules.md#working-with-other-javascript-libraries) æ‰¾åˆ°

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---

## æ•™ç¨‹å’Œæ–‡ç« 
> ç›¸å…³è¿›é˜¶æ•™ç¨‹ç²¾é€‰æ¸…å•

é«˜é˜¶ç»„ä»¶ï¼š
- https://medium.com/@jrwebdev/react-higher-order-component-patterns-in-typescript-42278f7590fb

[â‡§ è¿”å›é¡¶éƒ¨](#ç›®å½•)

---


## è´¡çŒ®è€…

æ„Ÿè°¢è¿™äº›ä¼˜ç§€çš„äºº ([emoji key](https://github.com/kentcdodds/all-contributors#emoji-key)):

<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore -->
| [<img src="https://avatars0.githubusercontent.com/u/739075?v=4" width="100px;"/><br /><sub><b>Piotrek Witek</b></sub>](https://github.com/piotrwitek)<br />[ğŸ’»](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=piotrwitek "Code") [ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=piotrwitek "Documentation") [ğŸ¤”](#ideas-piotrwitek "Ideas, Planning, & Feedback") [ğŸ‘€](#review-piotrwitek "Reviewed Pull Requests") [ğŸ’¬](#question-piotrwitek "Answering Questions") | [<img src="https://avatars3.githubusercontent.com/u/8602615?v=4" width="100px;"/><br /><sub><b>Kazz Yokomizo</b></sub>](https://github.com/kazup01)<br />[ğŸ’µ](#financial-kazup01 "Financial") [ğŸ”](#fundingFinding-kazup01 "Funding Finding") | [<img src="https://avatars1.githubusercontent.com/u/366438?v=4" width="100px;"/><br /><sub><b>Jake Boone</b></sub>](https://github.com/jakeboone02)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=jakeboone02 "Documentation") | [<img src="https://avatars1.githubusercontent.com/u/9748762?v=4" width="100px;"/><br /><sub><b>Amit Dahan</b></sub>](https://github.com/amitdahan)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=amitdahan "Documentation") | [<img src="https://avatars1.githubusercontent.com/u/98167?v=4" width="100px;"/><br /><sub><b>gulderov</b></sub>](https://github.com/gulderov)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=gulderov "Documentation") | [<img src="https://avatars1.githubusercontent.com/u/1964212?v=4" width="100px;"/><br /><sub><b>Erik Pearson</b></sub>](https://github.com/emp823)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=emp823 "Documentation") | [<img src="https://avatars1.githubusercontent.com/u/5342677?v=4" width="100px;"/><br /><sub><b>Bryan Mason</b></sub>](https://github.com/flymason)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=flymason "Documentation") |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| [<img src="https://avatars1.githubusercontent.com/u/119451?v=4" width="100px;"/><br /><sub><b>Jakub Chodorowicz</b></sub>](http://www.jakub.chodorowicz.pl/)<br />[ğŸ’»](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=chodorowicz "Code") | [<img src="https://avatars1.githubusercontent.com/u/7266431?v=4" width="100px;"/><br /><sub><b>Oleg Maslov</b></sub>](https://github.com/mleg)<br />[ğŸ›](https://github.com/piotrwitek/react-redux-typescript-guide/issues?q=author%3Amleg "Bug reports") | [<img src="https://avatars0.githubusercontent.com/u/3393293?v=4" width="100px;"/><br /><sub><b>Aaron Westbrook</b></sub>](https://github.com/awestbro)<br />[ğŸ›](https://github.com/piotrwitek/react-redux-typescript-guide/issues?q=author%3Aawestbro "Bug reports") | [<img src="https://avatars3.githubusercontent.com/u/14539?v=4" width="100px;"/><br /><sub><b>Peter Blazejewicz</b></sub>](http://www.linkedin.com/in/peterblazejewicz)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=peterblazejewicz "Documentation") | [<img src="https://avatars3.githubusercontent.com/u/1642?v=4" width="100px;"/><br /><sub><b>Solomon White</b></sub>](https://github.com/rubysolo)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=rubysolo "Documentation") | [<img src="https://avatars2.githubusercontent.com/u/8838006?v=4" width="100px;"/><br /><sub><b>Levi Rocha</b></sub>](https://github.com/pino)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=pino "Documentation") | [<img src="https://avatars1.githubusercontent.com/u/41281835?v=4" width="100px;"/><br /><sub><b>Sudachi-kun</b></sub>](http://cloudnative.co.jp)<br />[ğŸ’µ](#financial-loadbalance-sudachi-kun "Financial") |
| [<img src="https://avatars1.githubusercontent.com/u/14838850?v=4" width="100px;"/><br /><sub><b>Sosuke Suzuki</b></sub>](http://sosukesuzuki.github.io)<br />[ğŸ’»](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=sosukesuzuki "Code") | [<img src="https://avatars0.githubusercontent.com/u/74433?v=4" width="100px;"/><br /><sub><b>Tom Rathbone</b></sub>](https://github.com/chillitom)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=chillitom "Documentation") | [<img src="https://avatars3.githubusercontent.com/u/4654382?v=4" width="100px;"/><br /><sub><b>Arshad Kazmi</b></sub>](https://arshadkazmi42.github.io/)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=arshadkazmi42 "Documentation") | [<img src="https://avatars1.githubusercontent.com/u/8815362?v=4" width="100px;"/><br /><sub><b>JeongUkJae</b></sub>](https://jeongukjae.github.io)<br />[ğŸ“–](https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=JeongUkJae "Documentation") |
<!-- ALL-CONTRIBUTORS-LIST:END -->

è¿™ä¸ªé¡¹ç›®éµå¾ª [all-contributors](https://github.com/kentcdodds/all-contributors) è§„èŒƒã€‚æ¬¢è¿ä»»æ„å½¢å¼çš„è´¡çŒ®ï¼

---

MIT License

Copyright (c) 2017 Piotr Witek <piotrek.witek@gmail.com> (http://piotrwitek.github.io)
